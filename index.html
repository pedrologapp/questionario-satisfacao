<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionário de Satisfação Escolar - Centro Educacional Amadeus</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .header .address {
            font-size: 0.9rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .header .authorization {
            font-size: 0.85rem;
            margin-bottom: 15px;
            opacity: 0.8;
        }

        .header .title {
            font-size: 1.4rem;
            margin-top: 20px;
            font-weight: 600;
        }

        .intro-section {
            padding: 40px 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .intro-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .intro-section p {
            margin-bottom: 15px;
            color: #495057;
        }

        .scale-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
            margin-top: 20px;
            font-weight: 600;
            color: #1565c0;
        }

        .progress-container {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 1px solid #e9ecef;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
            color: #495057;
        }

        .form-container {
            padding: 40px 30px;
        }

        .section {
            margin-bottom: 40px;
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #4facfe;
        }

        .section-icon {
            font-size: 2rem;
            margin-right: 15px;
        }

        .section-title {
            font-size: 1.5rem;
            color: #2c3e50;
            font-weight: 600;
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 4px solid #4facfe;
            transition: all 0.3s ease;
        }

        .question-card:hover {
            box-shadow: 0 4px 12px rgba(79, 172, 254, 0.1);
        }

        .question-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 1rem;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 10px 15px;
            border-radius: 8px;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .radio-option:hover {
            background: rgba(79, 172, 254, 0.1);
            border-color: #4facfe;
        }

        .radio-option input[type="radio"] {
            margin: 0;
            cursor: pointer;
            transform: scale(1.2);
        }

        .radio-option label {
            cursor: pointer;
            font-size: 0.95rem;
            color: #495057;
            font-weight: 500;
        }

        .radio-option.selected {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        .radio-option.selected label {
            color: white;
        }

        .scale-legend {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.8rem;
            color: #6c757d;
            font-style: italic;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            padding: 10px;
            background: #fff3cd;
            border-radius: 6px;
            border: 1px solid #ffeaa7;
        }

        .checkbox-option input[type="checkbox"] {
            transform: scale(1.2);
        }

        .checkbox-option label {
            font-weight: 500;
            color: #856404;
        }

        .textarea-container {
            margin-top: 20px;
        }

        .textarea-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
            font-size: 0.95rem;
        }

        .textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .textarea:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .textarea.large {
            min-height: 150px;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 20px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            min-width: 120px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(79, 172, 254, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 60px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4facfe;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .success-screen {
            display: none;
            text-align: center;
            padding: 80px 30px;
        }

        .success-icon {
            width: 100px;
            height: 100px;
            background: #28a745;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .success-title {
            font-size: 2rem;
            color: #28a745;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .success-message {
            font-size: 1.1rem;
            color: #495057;
            margin-bottom: 30px;
        }

        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 30px;
            font-size: 0.9rem;
        }

        .footer p {
            margin-bottom: 5px;
        }

        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 8px;
            display: none;
        }

        .alert-danger {
            color: #721c24;
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }

        .alert-success {
            color: #155724;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }

        .validation-message {
            color: #dc3545;
            font-size: 0.85rem;
            margin-top: 10px;
            display: none;
        }

        .section-progress {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .section-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e9ecef;
            margin: 0 5px;
            transition: all 0.3s ease;
        }

        .section-indicator.completed {
            background: #28a745;
        }

        .section-indicator.current {
            background: #4facfe;
            transform: scale(1.3);
        }

        /* Estilos para campos de seleção */
        .select-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: inherit;
            background: white;
            transition: all 0.3s ease;
            margin-bottom: 15px;
        }

        .select-field:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .field-group {
            margin-bottom: 20px;
        }

        .field-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.95rem;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .intro-section, .form-container {
                padding: 30px 20px;
            }

            .progress-container {
                padding: 15px 20px;
            }

            .radio-group {
                flex-direction: column;
                gap: 10px;
            }

            .navigation-buttons {
                flex-direction: column;
                gap: 15px;
            }

            .btn {
                width: 100%;
            }

            .section-header {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .section-icon {
                margin-right: 0;
            }
        }

        .required-indicator {
            color: #dc3545;
            font-weight: bold;
        }

        .optional-indicator {
            color: #6c757d;
            font-style: italic;
            font-size: 0.85rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div style="display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 10px;">
                <img src="logo-amadeus.png"  
                     alt="Logo Centro Educacional Amadeus" 
                     style="width: 80px; height: 80px;">
                <div>
                    <h1>CENTRO EDUCACIONAL AMADEUS</h1>
                </div>
            </div>
            <div class="address">Rua: Benedito Santana, 09 - Conj. Amarante - S. G. Amarante - 59290-000</div>
            <div class="authorization">Portaria de Autorização Nº838/2014 - SECD-GS<br>
            CNPJ 07.865.259/0001-60 TEL (084)3614-0579 / 98759-5861</div>
            <div class="title">📝 Questionário de Satisfação Escolar para Pais</div>
        </div>

        <!-- Intro Section -->
        <div class="intro-section">
            <h2>Prezados Pais e Responsáveis,</h2>
            <p>Agradecemos sua colaboração em responder este breve questionário. Seu feedback é muito importante para melhorarmos continuamente a qualidade de nossa escola.</p>
            <p>Por favor, responda com sinceridade, marcando a alternativa que melhor representa sua opinião.</p>
            <p><strong>IMPORTANTE: Este questionário é ANÔNIMO. Não coletamos dados pessoais.</strong></p>
            <div class="scale-info">
                <p>(1) = Insatisfeito</p>
                <p>(2) = Pouco satisfeito</p>
                <p>(3) = Satisfeito</p>
                <p>(4) = Muito satisfeito</p>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">0% concluído</div>
        </div>

        <!-- Form Container -->
        <div class="form-container">
            <!-- Section Progress Indicators -->
            <div class="section-progress" id="sectionProgress"></div>

            <!-- Alerts -->
            <div class="alert alert-danger" id="alertError"></div>
            <div class="alert alert-success" id="alertSuccess"></div>

            <form id="questionarioForm">
                <!-- Seção 0: Dados do Aluno -->
                <div class="section active" id="section-dados-aluno">
                    <div class="section-header">
                        <div class="section-icon">👨‍🎓</div>
                        <div class="section-title">Dados do Aluno</div>
                    </div>

                    <!-- Seleção da Série -->
                    <div class="question-card">
                        <label class="question-title" for="serie">
                            Série do seu filho(a) <span class="required-indicator">*</span>
                        </label>
                        <select id="serie" name="serie" class="select-field" required>
                            <option value="">Selecione a série...</option>
                            <option value="maternal2">Maternal II</option>
                            <option value="maternal3">Maternal III</option>
                            <option value="grupo4">Grupo 4</option>
                            <option value="grupo5">Grupo 5</option>
                            <option value="1ano">1º ano</option>
                            <option value="2ano">2º ano</option>
                            <option value="3ano">3º ano</option>
                            <option value="4ano">4º ano</option>
                            <option value="5ano">5º ano</option>
                            <option value="6ano">6º ano</option>
                            <option value="7ano">7º ano</option>
                            <option value="8ano">8º ano</option>
                            <option value="9ano">9º ano</option>
                        </select>
                    </div>

                    <!-- Seleção de Turma/Turno (aparece dinamicamente) -->
                    <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 250px;">
                            <div class="question-card" id="turmaGroup" style="display: none;">
                                <label class="question-title" for="turma" id="turmaLabel">
                                    Turma <span class="required-indicator">*</span>
                                </label>
                                <select id="turma" name="turma" class="select-field">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="flex: 1; min-width: 250px;">
                            <div class="question-card" id="turnoGroup" style="display: none;">
                                <label class="question-title" for="turno">
                                    Turno <span class="required-indicator">*</span>
                                </label>
                                <select id="turno" name="turno" class="select-field">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Exibição do Professor (automático) -->
                    <div class="question-card">
                        <label class="question-title">Professor(a) Responsável</label>
                        <div style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 12px 15px; margin-top: 10px; min-height: 45px; display: flex; align-items: center; color: #6c757d; font-style: italic;" id="professorInfo">
                            Será preenchido automaticamente após selecionar série e turma
                        </div>
                    </div>

                    <!-- Card de Preview dos Dados -->
                    <div style="background: #f8f9fa; border-radius: 12px; padding: 25px; margin-top: 30px; border-left: 4px solid #28a745; display: none;" id="previewCard">
                        <div style="font-size: 1.1rem; font-weight: 600; color: #28a745; margin-bottom: 15px;">📋 Resumo dos Dados do Aluno</div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e9ecef;">
                                <span style="font-weight: 600; color: #495057;">Série:</span>
                                <span style="color: #2c3e50; font-weight: 500;" id="previewSerie">-</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e9ecef;">
                                <span style="font-weight: 600; color: #495057;">Turma:</span>
                                <span style="color: #2c3e50; font-weight: 500;" id="previewTurma">-</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e9ecef;">
                                <span style="font-weight: 600; color: #495057;">Turno:</span>
                                <span style="color: #2c3e50; font-weight: 500;" id="previewTurno">-</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e9ecef;">
                                <span style="font-weight: 600; color: #495057;">Professor(a):</span>
                                <span style="color: #2c3e50; font-weight: 500;" id="previewProfessor">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Seção 1: Professores -->
                <div class="section" id="section-professores">
                    <div class="section-header">
                        <div class="section-icon">📚</div>
                        <div class="section-title">Professores</div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">1.1. O desempenho geral dos professores <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="prof_desempenho_1" name="professores_desempenho" value="1" required>
                                <label for="prof_desempenho_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="prof_desempenho_2" name="professores_desempenho" value="2">
                                <label for="prof_desempenho_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="prof_desempenho_3" name="professores_desempenho" value="3">
                                <label for="prof_desempenho_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="prof_desempenho_4" name="professores_desempenho" value="4">
                                <label for="prof_desempenho_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">1.2. A relação dos professores com os alunos <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="prof_relacao_1" name="professores_relacao" value="1" required>
                                <label for="prof_relacao_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="prof_relacao_2" name="professores_relacao" value="2">
                                <label for="prof_relacao_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="prof_relacao_3" name="professores_relacao" value="3">
                                <label for="prof_relacao_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="prof_relacao_4" name="professores_relacao" value="4">
                                <label for="prof_relacao_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">1.3. A comunicação dos professores com os pais <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="prof_comunicacao_1" name="professores_comunicacao" value="1" required>
                                <label for="prof_comunicacao_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="prof_comunicacao_2" name="professores_comunicacao" value="2">
                                <label for="prof_comunicacao_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="prof_comunicacao_3" name="professores_comunicacao" value="3">
                                <label for="prof_comunicacao_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="prof_comunicacao_4" name="professores_comunicacao" value="4">
                                <label for="prof_comunicacao_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="professores_comentarios">Comentários adicionais sobre os professores <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="professores_comentarios" name="professores_comentarios" class="textarea" placeholder="Compartilhe suas observações sobre os professores..."></textarea>
                    </div>
                </div>

                <!-- Seção 2: Cantina -->
                <div class="section" id="section-cantina">
                    <div class="section-header">
                        <div class="section-icon">🍽️</div>
                        <div class="section-title">Cantina</div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">2.1. A qualidade dos alimentos oferecidos <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="cantina_qualidade_1" name="cantina_qualidade" value="1" required>
                                <label for="cantina_qualidade_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="cantina_qualidade_2" name="cantina_qualidade" value="2">
                                <label for="cantina_qualidade_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="cantina_qualidade_3" name="cantina_qualidade" value="3">
                                <label for="cantina_qualidade_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="cantina_qualidade_4" name="cantina_qualidade" value="4">
                                <label for="cantina_qualidade_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">2.2. A variedade do cardápio <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="cantina_variedade_1" name="cantina_variedade" value="1" required>
                                <label for="cantina_variedade_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="cantina_variedade_2" name="cantina_variedade" value="2">
                                <label for="cantina_variedade_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="cantina_variedade_3" name="cantina_variedade" value="3">
                                <label for="cantina_variedade_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="cantina_variedade_4" name="cantina_variedade" value="4">
                                <label for="cantina_variedade_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">2.3. O atendimento da cantina <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="cantina_atendimento_1" name="cantina_atendimento" value="1" required>
                                <label for="cantina_atendimento_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="cantina_atendimento_2" name="cantina_atendimento" value="2">
                                <label for="cantina_atendimento_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="cantina_atendimento_3" name="cantina_atendimento" value="3">
                                <label for="cantina_atendimento_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="cantina_atendimento_4" name="cantina_atendimento" value="4">
                                <label for="cantina_atendimento_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="cantina_comentarios">Comentários adicionais sobre a cantina <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="cantina_comentarios" name="cantina_comentarios" class="textarea" placeholder="Compartilhe suas observações sobre a cantina..."></textarea>
                    </div>
                </div>

                <!-- Seção 3: Limpeza -->
                <div class="section" id="section-limpeza">
                    <div class="section-header">
                        <div class="section-icon">🧽</div>
                        <div class="section-title">Limpeza</div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">3.1. A limpeza das salas de aula <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="limpeza_salas_1" name="limpeza_salas" value="1" required>
                                <label for="limpeza_salas_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="limpeza_salas_2" name="limpeza_salas" value="2">
                                <label for="limpeza_salas_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="limpeza_salas_3" name="limpeza_salas" value="3">
                                <label for="limpeza_salas_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="limpeza_salas_4" name="limpeza_salas" value="4">
                                <label for="limpeza_salas_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">3.2. A limpeza dos banheiros <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="limpeza_banheiros_1" name="limpeza_banheiros" value="1" required>
                                <label for="limpeza_banheiros_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="limpeza_banheiros_2" name="limpeza_banheiros" value="2">
                                <label for="limpeza_banheiros_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="limpeza_banheiros_3" name="limpeza_banheiros" value="3">
                                <label for="limpeza_banheiros_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="limpeza_banheiros_4" name="limpeza_banheiros" value="4">
                                <label for="limpeza_banheiros_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">3.3. A limpeza das áreas comuns <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="limpeza_areas_1" name="limpeza_areas" value="1" required>
                                <label for="limpeza_areas_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="limpeza_areas_2" name="limpeza_areas" value="2">
                                <label for="limpeza_areas_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="limpeza_areas_3" name="limpeza_areas" value="3">
                                <label for="limpeza_areas_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="limpeza_areas_4" name="limpeza_areas" value="4">
                                <label for="limpeza_areas_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="limpeza_comentarios">Comentários adicionais sobre a limpeza <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="limpeza_comentarios" name="limpeza_comentarios" class="textarea" placeholder="Compartilhe suas observações sobre a limpeza..."></textarea>
                    </div>
                </div>

                <!-- Seção 4: Agenda Edu -->
                <div class="section" id="section-agenda-edu">
                    <div class="section-header">
                        <div class="section-icon">📱</div>
                        <div class="section-title">Agenda Edu</div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">4.1. A facilidade de uso da Agenda Edu <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="agenda_facilidade_1" name="agenda_facilidade" value="1" required>
                                <label for="agenda_facilidade_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="agenda_facilidade_2" name="agenda_facilidade" value="2">
                                <label for="agenda_facilidade_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="agenda_facilidade_3" name="agenda_facilidade" value="3">
                                <label for="agenda_facilidade_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="agenda_facilidade_4" name="agenda_facilidade" value="4">
                                <label for="agenda_facilidade_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">4.2. A qualidade das informações compartilhadas <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="agenda_informacoes_1" name="agenda_informacoes" value="1" required>
                                <label for="agenda_informacoes_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="agenda_informacoes_2" name="agenda_informacoes" value="2">
                                <label for="agenda_informacoes_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="agenda_informacoes_3" name="agenda_informacoes" value="3">
                                <label for="agenda_informacoes_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="agenda_informacoes_4" name="agenda_informacoes" value="4">
                                <label for="agenda_informacoes_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">4.3. A frequência das atualizações <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="agenda_frequencia_1" name="agenda_frequencia" value="1" required>
                                <label for="agenda_frequencia_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="agenda_frequencia_2" name="agenda_frequencia" value="2">
                                <label for="agenda_frequencia_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="agenda_frequencia_3" name="agenda_frequencia" value="3">
                                <label for="agenda_frequencia_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="agenda_frequencia_4" name="agenda_frequencia" value="4">
                                <label for="agenda_frequencia_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="agenda_comentarios">Comentários adicionais sobre a Agenda Edu <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="agenda_comentarios" name="agenda_comentarios" class="textarea" placeholder="Compartilhe suas observações sobre a Agenda Edu..."></textarea>
                    </div>
                </div>

                <!-- Seção 5: Coordenação -->
                <div class="section" id="section-coordenacao">
                    <div class="section-header">
                        <div class="section-icon">👥</div>
                        <div class="section-title">Coordenação</div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">5.1. O atendimento da coordenação <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_atendimento_1" name="coordenacao_atendimento" value="1" required>
                                <label for="coordenacao_atendimento_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_atendimento_2" name="coordenacao_atendimento" value="2">
                                <label for="coordenacao_atendimento_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_atendimento_3" name="coordenacao_atendimento" value="3">
                                <label for="coordenacao_atendimento_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_atendimento_4" name="coordenacao_atendimento" value="4">
                                <label for="coordenacao_atendimento_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">5.2. A resolução de problemas <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_resolucao_1" name="coordenacao_resolucao" value="1" required>
                                <label for="coordenacao_resolucao_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_resolucao_2" name="coordenacao_resolucao" value="2">
                                <label for="coordenacao_resolucao_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_resolucao_3" name="coordenacao_resolucao" value="3">
                                <label for="coordenacao_resolucao_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_resolucao_4" name="coordenacao_resolucao" value="4">
                                <label for="coordenacao_resolucao_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">5.3. A comunicação com os pais <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_comunicacao_1" name="coordenacao_comunicacao" value="1" required>
                                <label for="coordenacao_comunicacao_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_comunicacao_2" name="coordenacao_comunicacao" value="2">
                                <label for="coordenacao_comunicacao_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_comunicacao_3" name="coordenacao_comunicacao" value="3">
                                <label for="coordenacao_comunicacao_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="coordenacao_comunicacao_4" name="coordenacao_comunicacao" value="4">
                                <label for="coordenacao_comunicacao_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="coordenacao_comentarios">Comentários adicionais sobre a coordenação <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="coordenacao_comentarios" name="coordenacao_comentarios" class="textarea" placeholder="Compartilhe suas observações sobre a coordenação..."></textarea>
                    </div>
                </div>

                <!-- Seção 6: Direção -->
                <div class="section" id="section-direcao">
                    <div class="section-header">
                        <div class="section-icon">🏛️</div>
                        <div class="section-title">Direção</div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">6.1. A liderança da direção <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="direcao_lideranca_1" name="direcao_lideranca" value="1" required>
                                <label for="direcao_lideranca_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="direcao_lideranca_2" name="direcao_lideranca" value="2">
                                <label for="direcao_lideranca_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="direcao_lideranca_3" name="direcao_lideranca" value="3">
                                <label for="direcao_lideranca_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="direcao_lideranca_4" name="direcao_lideranca" value="4">
                                <label for="direcao_lideranca_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">6.2. A gestão da escola <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="direcao_gestao_1" name="direcao_gestao" value="1" required>
                                <label for="direcao_gestao_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="direcao_gestao_2" name="direcao_gestao" value="2">
                                <label for="direcao_gestao_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="direcao_gestao_3" name="direcao_gestao" value="3">
                                <label for="direcao_gestao_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="direcao_gestao_4" name="direcao_gestao" value="4">
                                <label for="direcao_gestao_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">6.3. A transparência nas decisões <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="direcao_transparencia_1" name="direcao_transparencia" value="1" required>
                                <label for="direcao_transparencia_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="direcao_transparencia_2" name="direcao_transparencia" value="2">
                                <label for="direcao_transparencia_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="direcao_transparencia_3" name="direcao_transparencia" value="3">
                                <label for="direcao_transparencia_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="direcao_transparencia_4" name="direcao_transparencia" value="4">
                                <label for="direcao_transparencia_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="direcao_comentarios">Comentários adicionais sobre a direção <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="direcao_comentarios" name="direcao_comentarios" class="textarea" placeholder="Compartilhe suas observações sobre a direção..."></textarea>
                    </div>
                </div>

                <!-- Seção 7: Recepção -->
                <div class="section" id="section-recepcao">
                    <div class="section-header">
                        <div class="section-icon">🏢</div>
                        <div class="section-title">Recepção</div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">7.1. O atendimento da recepção <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="recepcao_atendimento_1" name="recepcao_atendimento" value="1" required>
                                <label for="recepcao_atendimento_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recepcao_atendimento_2" name="recepcao_atendimento" value="2">
                                <label for="recepcao_atendimento_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recepcao_atendimento_3" name="recepcao_atendimento" value="3">
                                <label for="recepcao_atendimento_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recepcao_atendimento_4" name="recepcao_atendimento" value="4">
                                <label for="recepcao_atendimento_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">7.2. A agilidade no atendimento <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="recepcao_agilidade_1" name="recepcao_agilidade" value="1" required>
                                <label for="recepcao_agilidade_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recepcao_agilidade_2" name="recepcao_agilidade" value="2">
                                <label for="recepcao_agilidade_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recepcao_agilidade_3" name="recepcao_agilidade" value="3">
                                <label for="recepcao_agilidade_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recepcao_agilidade_4" name="recepcao_agilidade" value="4">
                                <label for="recepcao_agilidade_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">7.3. A cordialidade dos funcionários <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="recepcao_cordialidade_1" name="recepcao_cordialidade" value="1" required>
                                <label for="recepcao_cordialidade_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recepcao_cordialidade_2" name="recepcao_cordialidade" value="2">
                                <label for="recepcao_cordialidade_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recepcao_cordialidade_3" name="recepcao_cordialidade" value="3">
                                <label for="recepcao_cordialidade_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="recepcao_cordialidade_4" name="recepcao_cordialidade" value="4">
                                <label for="recepcao_cordialidade_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="recepcao_comentarios">Comentários adicionais sobre a recepção <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="recepcao_comentarios" name="recepcao_comentarios" class="textarea" placeholder="Compartilhe suas observações sobre a recepção..."></textarea>
                    </div>
                </div>

                <!-- Seção 8: Eventos -->
                <div class="section" id="section-eventos">
                    <div class="section-header">
                        <div class="section-icon">🎉</div>
                        <div class="section-title">Eventos</div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">8.1. A organização dos eventos <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="eventos_organizacao_1" name="eventos_organizacao" value="1" required>
                                <label for="eventos_organizacao_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="eventos_organizacao_2" name="eventos_organizacao" value="2">
                                <label for="eventos_organizacao_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="eventos_organizacao_3" name="eventos_organizacao" value="3">
                                <label for="eventos_organizacao_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="eventos_organizacao_4" name="eventos_organizacao" value="4">
                                <label for="eventos_organizacao_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">8.2. A frequência dos eventos <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="eventos_frequencia_1" name="eventos_frequencia" value="1" required>
                                <label for="eventos_frequencia_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="eventos_frequencia_2" name="eventos_frequencia" value="2">
                                <label for="eventos_frequencia_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="eventos_frequencia_3" name="eventos_frequencia" value="3">
                                <label for="eventos_frequencia_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="eventos_frequencia_4" name="eventos_frequencia" value="4">
                                <label for="eventos_frequencia_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">8.3. A qualidade dos eventos <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="eventos_qualidade_1" name="eventos_qualidade" value="1" required>
                                <label for="eventos_qualidade_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="eventos_qualidade_2" name="eventos_qualidade" value="2">
                                <label for="eventos_qualidade_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="eventos_qualidade_3" name="eventos_qualidade" value="3">
                                <label for="eventos_qualidade_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="eventos_qualidade_4" name="eventos_qualidade" value="4">
                                <label for="eventos_qualidade_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="eventos_comentarios">Comentários adicionais sobre os eventos <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="eventos_comentarios" name="eventos_comentarios" class="textarea" placeholder="Compartilhe suas observações sobre os eventos..."></textarea>
                    </div>
                </div>

                <!-- Seção 9: Segurança -->
                <div class="section" id="section-seguranca">
                    <div class="section-header">
                        <div class="section-icon">🔒</div>
                        <div class="section-title">Segurança</div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">9.1. A segurança física da escola <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="seguranca_fisica_1" name="seguranca_fisica" value="1" required>
                                <label for="seguranca_fisica_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="seguranca_fisica_2" name="seguranca_fisica" value="2">
                                <label for="seguranca_fisica_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="seguranca_fisica_3" name="seguranca_fisica" value="3">
                                <label for="seguranca_fisica_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="seguranca_fisica_4" name="seguranca_fisica" value="4">
                                <label for="seguranca_fisica_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">9.2. O controle de acesso <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="seguranca_acesso_1" name="seguranca_acesso" value="1" required>
                                <label for="seguranca_acesso_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="seguranca_acesso_2" name="seguranca_acesso" value="2">
                                <label for="seguranca_acesso_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="seguranca_acesso_3" name="seguranca_acesso" value="3">
                                <label for="seguranca_acesso_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="seguranca_acesso_4" name="seguranca_acesso" value="4">
                                <label for="seguranca_acesso_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">9.3. A supervisão dos alunos <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="seguranca_supervisao_1" name="seguranca_supervisao" value="1" required>
                                <label for="seguranca_supervisao_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="seguranca_supervisao_2" name="seguranca_supervisao" value="2">
                                <label for="seguranca_supervisao_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="seguranca_supervisao_3" name="seguranca_supervisao" value="3">
                                <label for="seguranca_supervisao_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="seguranca_supervisao_4" name="seguranca_supervisao" value="4">
                                <label for="seguranca_supervisao_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="seguranca_comentarios">Comentários adicionais sobre a segurança <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="seguranca_comentarios" name="seguranca_comentarios" class="textarea" placeholder="Compartilhe suas observações sobre a segurança..."></textarea>
                    </div>
                </div>

                <!-- Seção 10: Avaliação Geral -->
                <div class="section" id="section-avaliacao-geral">
                    <div class="section-header">
                        <div class="section-icon">⭐</div>
                        <div class="section-title">Avaliação Geral</div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">10.1. Sua satisfação geral com a escola <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="geral_satisfacao_1" name="geral_satisfacao" value="1" required>
                                <label for="geral_satisfacao_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="geral_satisfacao_2" name="geral_satisfacao" value="2">
                                <label for="geral_satisfacao_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="geral_satisfacao_3" name="geral_satisfacao" value="3">
                                <label for="geral_satisfacao_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="geral_satisfacao_4" name="geral_satisfacao" value="4">
                                <label for="geral_satisfacao_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Insatisfeito</span>
                            <span>Muito satisfeito</span>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">10.2. Você recomendaria nossa escola para outros pais? <span class="required-indicator">*</span></div>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="geral_recomendacao_1" name="geral_recomendacao" value="1" required>
                                <label for="geral_recomendacao_1">1</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="geral_recomendacao_2" name="geral_recomendacao" value="2">
                                <label for="geral_recomendacao_2">2</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="geral_recomendacao_3" name="geral_recomendacao" value="3">
                                <label for="geral_recomendacao_3">3</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="geral_recomendacao_4" name="geral_recomendacao" value="4">
                                <label for="geral_recomendacao_4">4</label>
                            </div>
                        </div>
                        <div class="scale-legend">
                            <span>Definitivamente não</span>
                            <span>Definitivamente sim</span>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="geral_sugestoes">Sugestões para melhorias <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="geral_sugestoes" name="geral_sugestoes" class="textarea large" placeholder="Compartilhe suas sugestões para melhorarmos ainda mais nossa escola..."></textarea>
                    </div>

                    <div class="textarea-container">
                        <label class="textarea-label" for="geral_comentarios">Comentários finais <span class="optional-indicator">(opcional)</span></label>
                        <textarea id="geral_comentarios" name="geral_comentarios" class="textarea large" placeholder="Deixe aqui qualquer comentário adicional que gostaria de compartilhar..."></textarea>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="navigation-buttons">
                    <button type="button" class="btn btn-secondary" id="prevBtn" onclick="previousSection()">Anterior</button>
                    <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextSection()">Próximo</button>
                    <button type="submit" class="btn btn-primary" id="submitBtn" style="display: none;">Enviar Questionário</button>
                </div>
            </form>
        </div>

        <!-- Loading Screen -->
        <div class="loading" id="loadingScreen">
            <div class="spinner"></div>
            <h3>Enviando suas respostas...</h3>
            <p>Por favor, aguarde enquanto processamos seu questionário.</p>
        </div>

        <!-- Success Screen -->
        <div class="success-screen" id="successScreen">
            <div class="success-icon">✓</div>
            <h2 class="success-title">Questionário Enviado com Sucesso!</h2>
            <p class="success-message">Agradecemos muito pela sua participação. Suas respostas são fundamentais para melhorarmos continuamente a qualidade de nossa escola.</p>
            <p class="success-message">Suas informações foram registradas de forma anônima e serão utilizadas exclusivamente para fins de melhoria dos nossos serviços.</p>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>&copy; 2024 Centro Educacional Amadeus. Todos os direitos reservados.</p>
            <p>Este questionário é confidencial e anônimo.</p>
        </div>
    </div>

    <script>
        // Dados das séries e suas configurações
        const seriesData = {
            maternal2: {
                nome: "Maternal II",
                tipo: "automatico",
                professor: "Luana Fraga",
                turno: "Vespertino",
                turma: ""
            },
            maternal3: {
                nome: "Maternal III",
                tipo: "turno_multiplo",
                professor: "Andréa Leite",
                opcoes: [
                    { turno: "Matutino", turma: "" },
                    { turno: "Vespertino", turma: "" }
                ]
            },
            grupo4: {
                nome: "Grupo 4",
                tipo: "turno_multiplo",
                professor: "Jaqueline",
                opcoes: [
                    { turno: "Matutino", turma: "" },
                    { turno: "Vespertino", turma: "" }
                ]
            },
            grupo5: {
                nome: "Grupo 5",
                tipo: "turno_multiplo",
                professor: "Auriete",
                opcoes: [
                    { turno: "Matutino", turma: "" },
                    { turno: "Vespertino", turma: "" }
                ]
            },
            "1ano": {
                nome: "1º ano",
                tipo: "turma_multipla",
                opcoes: [
                    { turma: "A", professor: "Andréa Leonice", turno: "Matutino" },
                    { turma: "B", professor: "Andréa Leonice", turno: "Vespertino" },
                    { turma: "C", professor: "Suziane", turno: "Matutino" }
                ]
            },
            "2ano": {
                nome: "2º ano",
                tipo: "turma_multipla",
                opcoes: [
                    { turma: "A", professor: "Josesclea", turno: "Matutino" },
                    { turma: "B", professor: "Josesclea", turno: "Vespertino" },
                    { turma: "C", professor: "Suziane", turno: "Matutino" }
                ]
            },
            "3ano": {
                nome: "3º ano",
                tipo: "turma_multipla",
                opcoes: [
                    { turma: "A", professor: "Nathalia", turno: "Matutino" },
                    { turma: "B", professor: "Nathalia", turno: "Vespertino" }
                ]
            },
            "4ano": {
                nome: "4º ano",
                tipo: "turma_multipla",
                opcoes: [
                    { turma: "A", professor: "Isabelle", turno: "Matutino" },
                    { turma: "B", professor: "Isabelle", turno: "Vespertino" }
                ]
            },
            "5ano": {
                nome: "5º ano",
                tipo: "turma_multipla",
                opcoes: [
                    { turma: "A", professor: "Rita", turno: "Matutino" },
                    { turma: "B", professor: "Rita", turno: "Vespertino" }
                ]
            },
            "6ano": {
                nome: "6º ano",
                tipo: "turma_multipla",
                opcoes: [
                    { turma: "A", professor: "", turno: "Matutino" },
                    { turma: "B", professor: "", turno: "Vespertino" }
                ]
            },
            "7ano": {
                nome: "7º ano",
                tipo: "turma_multipla",
                opcoes: [
                    { turma: "A", professor: "", turno: "Matutino" },
                    { turma: "B", professor: "", turno: "Vespertino" }
                ]
            },
            "8ano": {
                nome: "8º ano",
                tipo: "turma_multipla",
                opcoes: [
                    { turma: "A", professor: "", turno: "Matutino" },
                    { turma: "B", professor: "", turno: "Vespertino" }
                ]
            },
            "9ano": {
                nome: "9º ano",
                tipo: "automatico",
                professor: "",
                turno: "Matutino",
                turma: "A"
            }
        };

        // Elementos do DOM para dados do aluno
        const serieSelect = document.getElementById('serie');
        const turmaGroup = document.getElementById('turmaGroup');
        const turmaSelect = document.getElementById('turma');
        const turmaLabel = document.getElementById('turmaLabel');
        const turnoGroup = document.getElementById('turnoGroup');
        const turnoSelect = document.getElementById('turno');
        const professorInfo = document.getElementById('professorInfo');
        const previewCard = document.getElementById('previewCard');

        // Event listeners para dados do aluno
        if (serieSelect) serieSelect.addEventListener('change', handleSerieChange);
        if (turmaSelect) turmaSelect.addEventListener('change', handleTurmaChange);
        if (turnoSelect) turnoSelect.addEventListener('change', handleTurnoChange);

        function handleSerieChange() {
            const serieValue = serieSelect.value;
            resetDadosAlunoFields();

            if (!serieValue) {
                hideAllDadosAlunoGroups();
                return;
            }

            const serieData = seriesData[serieValue];

            switch (serieData.tipo) {
                case 'automatico':
                    handleAutomatico(serieData);
                    break;
                case 'turno_multiplo':
                    handleTurnoMultiplo(serieData);
                    break;
                case 'turma_multipla':
                    handleTurmaMultipla(serieData);
                    break;
            }

            updatePreview();
        }

        function handleAutomatico(serieData) {
            hideAllDadosAlunoGroups();
            professorInfo.textContent = serieData.professor || "Professor não informado";
            professorInfo.style.background = "#e8f5e8";
            professorInfo.style.borderColor = "#c3e6c3";
            professorInfo.style.color = "#155724";
            professorInfo.style.fontStyle = "normal";
            professorInfo.style.fontWeight = "600";
            showPreview();
        }

        function handleTurnoMultiplo(serieData) {
            turmaGroup.style.display = 'none';
            turnoGroup.style.display = 'block';
            
            // Preencher opções de turno
            turnoSelect.innerHTML = '<option value="">Selecione o turno...</option>';
            serieData.opcoes.forEach(opcao => {
                const option = document.createElement('option');
                option.value = opcao.turno.toLowerCase();
                option.textContent = opcao.turno;
                turnoSelect.appendChild(option);
            });

            professorInfo.textContent = serieData.professor;
            professorInfo.style.background = "#e8f5e8";
            professorInfo.style.borderColor = "#c3e6c3";
            professorInfo.style.color = "#155724";
            professorInfo.style.fontStyle = "normal";
            professorInfo.style.fontWeight = "600";
        }

        function handleTurmaMultipla(serieData) {
            turnoGroup.style.display = 'none';
            turmaGroup.style.display = 'block';
            turmaLabel.innerHTML = 'Turma <span class="required-indicator">*</span>';
            
            // Preencher opções de turma
            turmaSelect.innerHTML = '<option value="">Selecione a turma...</option>';
            serieData.opcoes.forEach(opcao => {
                const option = document.createElement('option');
                option.value = opcao.turma;
                option.textContent = `Turma ${opcao.turma} - ${opcao.turno}`;
                option.dataset.professor = opcao.professor;
                option.dataset.turno = opcao.turno;
                turmaSelect.appendChild(option);
            });

            professorInfo.textContent = "Selecione uma turma para ver o professor";
            professorInfo.style.background = "#f8f9fa";
            professorInfo.style.borderColor = "#e9ecef";
            professorInfo.style.color = "#6c757d";
            professorInfo.style.fontStyle = "italic";
            professorInfo.style.fontWeight = "normal";
        }

        function handleTurmaChange() {
            const selectedOption = turmaSelect.options[turmaSelect.selectedIndex];
            if (selectedOption.value) {
                const professor = selectedOption.dataset.professor || "Professor não informado";
                professorInfo.textContent = professor;
                professorInfo.style.background = "#e8f5e8";
                professorInfo.style.borderColor = "#c3e6c3";
                professorInfo.style.color = "#155724";
                professorInfo.style.fontStyle = "normal";
                professorInfo.style.fontWeight = "600";
                showPreview();
            } else {
                professorInfo.textContent = "Selecione uma turma para ver o professor";
                professorInfo.style.background = "#f8f9fa";
                professorInfo.style.borderColor = "#e9ecef";
                professorInfo.style.color = "#6c757d";
                professorInfo.style.fontStyle = "italic";
                professorInfo.style.fontWeight = "normal";
                hidePreview();
            }
            updatePreview();
        }

        function handleTurnoChange() {
            const turnoValue = turnoSelect.value;
            if (turnoValue) {
                showPreview();
            } else {
                hidePreview();
            }
            updatePreview();
        }

        function resetDadosAlunoFields() {
            turmaSelect.innerHTML = '<option value="">Selecione...</option>';
            turnoSelect.innerHTML = '<option value="">Selecione...</option>';
            professorInfo.textContent = "Será preenchido automaticamente após selecionar série e turma";
            professorInfo.style.background = "#f8f9fa";
            professorInfo.style.borderColor = "#e9ecef";
            professorInfo.style.color = "#6c757d";
            professorInfo.style.fontStyle = "italic";
            professorInfo.style.fontWeight = "normal";
            hidePreview();
        }

        function hideAllDadosAlunoGroups() {
            turmaGroup.style.display = 'none';
            turnoGroup.style.display = 'none';
        }

        function showPreview() {
            previewCard.style.display = 'block';
        }

        function hidePreview() {
            previewCard.style.display = 'none';
        }

        function updatePreview() {
            const serieValue = serieSelect.value;
            const turmaValue = turmaSelect.value;
            const turnoValue = turnoSelect.value;

            if (!serieValue) return;

            const serieData = seriesData[serieValue];
            
            // Atualizar série
            document.getElementById('previewSerie').textContent = serieData.nome;

            // Atualizar turma
            let turmaText = "-";
            if (serieData.tipo === 'automatico') {
                turmaText = serieData.turma || "Única";
            } else if (serieData.tipo === 'turno_multiplo') {
                turmaText = "Única";
            } else if (serieData.tipo === 'turma_multipla' && turmaValue) {
                turmaText = turmaValue;
            }
            document.getElementById('previewTurma').textContent = turmaText;

            // Atualizar turno
            let turnoText = "-";
            if (serieData.tipo === 'automatico') {
                turnoText = serieData.turno || "-";
            } else if (serieData.tipo === 'turno_multiplo' && turnoValue) {
                turnoText = turnoValue.charAt(0).toUpperCase() + turnoValue.slice(1);
            } else if (serieData.tipo === 'turma_multipla' && turmaValue) {
                const selectedOption = turmaSelect.options[turmaSelect.selectedIndex];
                turnoText = selectedOption.dataset.turno || "-";
            }
            document.getElementById('previewTurno').textContent = turnoText;

            // Atualizar professor
            let professorText = "-";
            if (serieData.tipo === 'automatico') {
                professorText = serieData.professor || "Professor não informado";
            } else if (serieData.tipo === 'turno_multiplo') {
                professorText = serieData.professor || "Professor não informado";
            } else if (serieData.tipo === 'turma_multipla' && turmaValue) {
                const selectedOption = turmaSelect.options[turmaSelect.selectedIndex];
                professorText = selectedOption.dataset.professor || "Professor não informado";
            }
            document.getElementById('previewProfessor').textContent = professorText;
        }

        // Configuração das séries e suas informações (código antigo - manter para compatibilidade)
        const seriesConfig = {
            'maternal_ii': {
                professor: 'Luana Fraga',
                turno: 'vespertino',
                turma: 'Única',
                autoFill: true
            },
            'maternal_iii': {
                professor: 'Andréa Leite',
                turnos: ['matutino', 'vespertino'],
                turma: 'Única',
                autoFill: false
            },
            '1_ano': {
                turmas: [
                    { nome: 'A', professor: 'Professor A', turno: 'matutino' },
                    { nome: 'B', professor: 'Professor B', turno: 'vespertino' }
                ],
                autoFill: false
            },
            '2_ano': {
                turmas: [
                    { nome: 'A', professor: 'Professor A', turno: 'matutino' },
                    { nome: 'B', professor: 'Professor B', turno: 'vespertino' },
                    { nome: 'C', professor: 'Professor C', turno: 'matutino' }
                ],
                autoFill: false
            },
            '3_ano': {
                turmas: [
                    { nome: 'A', professor: 'Professor A', turno: 'matutino' },
                    { nome: 'B', professor: 'Professor B', turno: 'vespertino' }
                ],
                autoFill: false
            },
            '4_ano': {
                turmas: [
                    { nome: 'A', professor: 'Professor A', turno: 'matutino' },
                    { nome: 'B', professor: 'Professor B', turno: 'vespertino' }
                ],
                autoFill: false
            },
            '5_ano': {
                turmas: [
                    { nome: 'A', professor: 'Professor A', turno: 'matutino' },
                    { nome: 'B', professor: 'Professor B', turno: 'vespertino' }
                ],
                autoFill: false
            }
        };

        // Variáveis globais para analytics comportamental
        let startTime = Date.now();
        let sectionStartTime = Date.now();
        let currentSection = 0;
        let analyticsData = {
            timePerSection: {},
            difficultyPoints: [],
            abandonmentPoints: [],
            totalTime: 0,
            completionRate: 0
        };

        // Lista de seções
        const sections = [
            'section-dados-aluno',
            'section-professores', 
            'section-cantina', 
            'section-limpeza', 
            'section-agenda-edu', 
            'section-coordenacao', 
            'section-direcao', 
            'section-recepcao', 
            'section-eventos', 
            'section-seguranca', 
            'section-avaliacao-geral'
        ];

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            initializeForm();
            setupEventListeners();
            loadSessionData();
            updateProgress();
            updateSectionProgress();
        });

        function initializeForm() {
            // Configurar analytics comportamental
            setupAnalytics();
        }

        function setupEventListeners() {
            // Event listeners para radio buttons
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => {
                radio.addEventListener('change', function() {
                    updateRadioSelection(this);
                    saveSessionData();
                    trackUserInteraction('radio_selection', this.name, this.value);
                });
            });

            // Event listeners para textareas
            const textareas = document.querySelectorAll('textarea');
            textareas.forEach(textarea => {
                textarea.addEventListener('input', function() {
                    saveSessionData();
                    trackUserInteraction('textarea_input', this.name, this.value.length);
                });
                
                textarea.addEventListener('focus', function() {
                    trackUserInteraction('textarea_focus', this.name);
                });
            });

            // Event listener para o formulário
            document.getElementById('questionarioForm').addEventListener('submit', handleFormSubmit);
        }

        function handleSerieChange() {
            const serie = this.value;
            const config = seriesConfig[serie];
            
            if (!config) {
                hideAllDynamicFields();
                return;
            }

            if (config.autoFill) {
                // Preenchimento automático para Maternal II
                autoFillFields(config);
            } else {
                // Mostrar campos para seleção manual
                showDynamicFields(config);
            }
            
            trackUserInteraction('serie_selection', 'serie', serie);
        }

        function autoFillFields(config) {
            // Preencher automaticamente os campos
            if (config.professor) {
                document.getElementById('professor-info').textContent = `Professor: ${config.professor}`;
                document.getElementById('professor-card').style.display = 'block';
                document.getElementById('professor').value = config.professor;
                document.getElementById('professor').style.display = 'none';
            }
            
            if (config.turno) {
                document.getElementById('turno-info').textContent = `Turno: ${config.turno.charAt(0).toUpperCase() + config.turno.slice(1)}`;
                document.getElementById('turno-card').style.display = 'block';
                document.getElementById('turno').value = config.turno;
                document.getElementById('turno').style.display = 'none';
            }
            
            if (config.turma) {
                document.getElementById('turma-info').textContent = `Turma: ${config.turma}`;
                document.getElementById('turma-card').style.display = 'block';
                document.getElementById('turma').value = config.turma;
                document.getElementById('turma').style.display = 'none';
            }
        }

        function showDynamicFields(config) {
            hideAllDynamicFields();
            
            if (config.professor && !config.turnos && !config.turmas) {
                // Maternal III - professor fixo, escolher turno
                document.getElementById('professor-info').textContent = `Professor: ${config.professor}`;
                document.getElementById('professor-card').style.display = 'block';
                document.getElementById('professor').value = config.professor;
                document.getElementById('professor').style.display = 'none';
                
                showTurnoSelection(config.turnos);
            } else if (config.turmas) {
                // Séries com turmas - escolher turma (que define professor e turno)
                showTurmaSelection(config.turmas);
            }
        }

        function showTurnoSelection(turnos) {
            const turnoSelect = document.getElementById('turno');
            const turnoCard = document.getElementById('turno-card');
            
            turnoSelect.innerHTML = '<option value="">Selecione o turno</option>';
            turnos.forEach(turno => {
                const option = document.createElement('option');
                option.value = turno;
                option.textContent = turno.charAt(0).toUpperCase() + turno.slice(1);
                turnoSelect.appendChild(option);
            });
            
            turnoSelect.style.display = 'block';
            turnoCard.style.display = 'block';
            document.getElementById('turno-info').textContent = '';
        }

        function showTurmaSelection(turmas) {
            const turmaSelect = document.getElementById('turma');
            const turmaCard = document.getElementById('turma-card');
            
            turmaSelect.innerHTML = '<option value="">Selecione a turma</option>';
            turmas.forEach(turma => {
                const option = document.createElement('option');
                option.value = JSON.stringify(turma);
                option.textContent = `Turma ${turma.nome} - ${turma.professor} (${turma.turno.charAt(0).toUpperCase() + turma.turno.slice(1)})`;
                turmaSelect.appendChild(option);
            });
            
            turmaSelect.style.display = 'block';
            turmaCard.style.display = 'block';
            document.getElementById('turma-info').textContent = '';
        }

        function handleTurnoChange() {
            const turno = this.value;
            if (turno) {
                document.getElementById('turma-info').textContent = 'Turma: Única';
                document.getElementById('turma-card').style.display = 'block';
                document.getElementById('turma').value = 'Única';
                document.getElementById('turma').style.display = 'none';
            }
            trackUserInteraction('turno_selection', 'turno', turno);
        }

        function handleTurmaChange() {
            const turmaData = this.value;
            if (turmaData && turmaData !== 'Única') {
                const turma = JSON.parse(turmaData);
                
                // Preencher professor e turno automaticamente
                document.getElementById('professor-info').textContent = `Professor: ${turma.professor}`;
                document.getElementById('professor-card').style.display = 'block';
                document.getElementById('professor').value = turma.professor;
                document.getElementById('professor').style.display = 'none';
                
                document.getElementById('turno-info').textContent = `Turno: ${turma.turno.charAt(0).toUpperCase() + turma.turno.slice(1)}`;
                document.getElementById('turno-card').style.display = 'block';
                document.getElementById('turno').value = turma.turno;
                document.getElementById('turno').style.display = 'none';
            }
            trackUserInteraction('turma_selection', 'turma', turmaData);
        }

        function hideAllDynamicFields() {
            document.getElementById('professor-card').style.display = 'none';
            document.getElementById('turno-card').style.display = 'none';
            document.getElementById('turma-card').style.display = 'none';
            
            // Resetar campos
            document.getElementById('professor').value = '';
            document.getElementById('turno').value = '';
            document.getElementById('turma').value = '';
            
            // Mostrar selects novamente
            document.getElementById('professor').style.display = 'block';
            document.getElementById('turno').style.display = 'block';
            document.getElementById('turma').style.display = 'block';
            
            // Limpar textos informativos
            document.getElementById('professor-info').textContent = '';
            document.getElementById('turno-info').textContent = '';
            document.getElementById('turma-info').textContent = '';
        }

        function setupAnalytics() {
            // Rastrear tempo gasto em cada seção
            sectionStartTime = Date.now();
            
            // Rastrear pontos de dificuldade (tempo excessivo em uma pergunta)
            const inputs = document.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                let focusTime = 0;
                
                input.addEventListener('focus', function() {
                    focusTime = Date.now();
                });
                
                input.addEventListener('blur', function() {
                    if (focusTime > 0) {
                        const timeSpent = Date.now() - focusTime;
                        if (timeSpent > 30000) { // Mais de 30 segundos
                            analyticsData.difficultyPoints.push({
                                section: sections[currentSection],
                                field: this.name || this.id,
                                timeSpent: timeSpent,
                                timestamp: Date.now()
                            });
                        }
                    }
                });
            });
            
            // Rastrear tentativas de abandono
            let isLeaving = false;
            window.addEventListener('beforeunload', function(e) {
                if (!isLeaving && hasUnsavedData()) {
                    analyticsData.abandonmentPoints.push({
                        section: sections[currentSection],
                        timestamp: Date.now(),
                        progress: (currentSection / sections.length) * 100
                    });
                    
                    // Salvar dados de analytics
                    saveAnalyticsData();
                }
            });
        }

        function trackUserInteraction(type, field, value) {
            // Registrar interação para analytics
            const interaction = {
                type: type,
                field: field,
                value: value,
                section: sections[currentSection],
                timestamp: Date.now(),
                timeFromStart: Date.now() - startTime
            };
            
            // Salvar no localStorage para posterior envio
            let interactions = JSON.parse(localStorage.getItem('questionario_interactions') || '[]');
            interactions.push(interaction);
            localStorage.setItem('questionario_interactions', JSON.stringify(interactions));
        }

        function nextSection() {
            if (validateCurrentSection()) {
                // Registrar tempo gasto na seção atual
                const timeSpent = Date.now() - sectionStartTime;
                analyticsData.timePerSection[sections[currentSection]] = timeSpent;
                
                // Avançar para próxima seção
                document.getElementById(sections[currentSection]).classList.remove('active');
                currentSection++;
                document.getElementById(sections[currentSection]).classList.add('active');
                
                // Resetar timer da seção
                sectionStartTime = Date.now();
                
                updateProgress();
                updateSectionProgress();
                updateNavigationButtons();
                saveSessionData();
                
                // Scroll para o topo
                window.scrollTo(0, 0);
                
                trackUserInteraction('section_advance', 'navigation', currentSection);
            }
        }

        function previousSection() {
            if (currentSection > 0) {
                // Registrar tempo gasto na seção atual
                const timeSpent = Date.now() - sectionStartTime;
                analyticsData.timePerSection[sections[currentSection]] = timeSpent;
                
                // Voltar para seção anterior
                document.getElementById(sections[currentSection]).classList.remove('active');
                currentSection--;
                document.getElementById(sections[currentSection]).classList.add('active');
                
                // Resetar timer da seção
                sectionStartTime = Date.now();
                
                updateProgress();
                updateSectionProgress();
                updateNavigationButtons();
                
                // Scroll para o topo
                window.scrollTo(0, 0);
                
                trackUserInteraction('section_back', 'navigation', currentSection);
            }
        }

        function validateCurrentSection() {
            const currentSectionElement = document.getElementById(sections[currentSection]);
            const requiredFields = currentSectionElement.querySelectorAll('[required]');
            let isValid = true;
            
            // Validação especial para seção de dados do aluno
            if (sections[currentSection] === 'section-dados-aluno') {
                const serie = document.getElementById('serie').value;
                if (!serie) {
                    showAlert('Por favor, selecione a série do seu filho(a).', 'danger');
                    return false;
                }
                
                const serieData = seriesData[serie];
                if (serieData) {
                    // Validar campos específicos baseados no tipo de série
                    if (serieData.tipo === 'turno_multiplo') {
                        const turno = document.getElementById('turno').value;
                        if (!turno) {
                            showAlert('Por favor, selecione o turno.', 'danger');
                            return false;
                        }
                    } else if (serieData.tipo === 'turma_multipla') {
                        const turma = document.getElementById('turma').value;
                        if (!turma) {
                            showAlert('Por favor, selecione a turma.', 'danger');
                            return false;
                        }
                    }
                }
                
                // Verificar se o professor foi preenchido
                const professorInfo = document.getElementById('professorInfo').textContent;
                if (professorInfo === "Será preenchido automaticamente após selecionar série e turma" || 
                    professorInfo === "Selecione uma turma para ver o professor") {
                    showAlert('Por favor, complete todos os dados do aluno antes de continuar.', 'danger');
                    return false;
                }
                
                return true;
            }
            
            // Validação padrão para outras seções
            requiredFields.forEach(field => {
                if (field.type === 'radio') {
                    const radioGroup = currentSectionElement.querySelectorAll(`input[name="${field.name}"]`);
                    const isChecked = Array.from(radioGroup).some(radio => radio.checked);
                    if (!isChecked) {
                        isValid = false;
                        showValidationError(`Por favor, responda à pergunta: ${field.closest('.question-card').querySelector('.question-title').textContent}`);
                    }
                } else if (!field.value.trim()) {
                    isValid = false;
                    showValidationError(`Por favor, preencha o campo: ${field.closest('.question-card').querySelector('.question-title').textContent}`);
                }
            });
            
            return isValid;
        }

        function showValidationError(message) {
            const alertElement = document.getElementById('alertError');
            alertElement.textContent = message;
            alertElement.style.display = 'block';
            
            setTimeout(() => {
                alertElement.style.display = 'none';
            }, 5000);
        }

        function updateProgress() {
            const progress = ((currentSection + 1) / sections.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = Math.round(progress) + '% concluído';
        }

        function updateSectionProgress() {
            const progressContainer = document.getElementById('sectionProgress');
            progressContainer.innerHTML = '';
            
            sections.forEach((section, index) => {
                const indicator = document.createElement('div');
                indicator.className = 'section-indicator';
                
                if (index < currentSection) {
                    indicator.classList.add('completed');
                } else if (index === currentSection) {
                    indicator.classList.add('current');
                }
                
                progressContainer.appendChild(indicator);
            });
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            
            prevBtn.style.display = currentSection === 0 ? 'none' : 'inline-block';
            
            if (currentSection === sections.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'inline-block';
            } else {
                nextBtn.style.display = 'inline-block';
                submitBtn.style.display = 'none';
            }
        }

        function updateRadioSelection(selectedRadio) {
            const radioGroup = document.querySelectorAll(`input[name="${selectedRadio.name}"]`);
            const radioOptions = document.querySelectorAll(`input[name="${selectedRadio.name}"]`).forEach(radio => {
                radio.closest('.radio-option').classList.remove('selected');
            });
            
            selectedRadio.closest('.radio-option').classList.add('selected');
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            
            if (validateCurrentSection()) {
                // Calcular analytics finais
                analyticsData.totalTime = Date.now() - startTime;
                analyticsData.completionRate = 100;
                
                // Coletar todos os dados do formulário
                const formData = new FormData(this);
                const questionarioData = {};
                
                for (let [key, value] of formData.entries()) {
                    questionarioData[key] = value;
                }
                
                // Adicionar dados de analytics
                questionarioData.analytics = analyticsData;
                questionarioData.interactions = JSON.parse(localStorage.getItem('questionario_interactions') || '[]');
                questionarioData.submissionTime = new Date().toISOString();
                
                // Mostrar tela de loading
                document.querySelector('.form-container').style.display = 'none';
                document.getElementById('loadingScreen').style.display = 'block';
                
                // Simular envio (aqui você integraria com n8n)
                setTimeout(() => {
                    submitToN8N(questionarioData);
                }, 2000);
            }
        }

        function submitToN8N(data) {
            // URL do webhook do n8n (substitua pela URL real)
            const n8nWebhookUrl = 'https://n8n.escolaamadeus.com/webhook-test/questionario-satisfacao';
            
            fetch(n8nWebhookUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (response.ok) {
                    showSuccessScreen();
                    clearSessionData();
                    clearAnalyticsData();
                } else {
                    throw new Error('Erro no envio');
                }
            })
            .catch(error => {
                console.error('Erro ao enviar questionário:', error);
                // Em caso de erro, ainda mostrar sucesso para o usuário
                // mas salvar dados localmente para reenvio posterior
                showSuccessScreen();
                saveForRetry(data);
            });
        }

        function showSuccessScreen() {
            document.getElementById('loadingScreen').style.display = 'none';
            document.getElementById('successScreen').style.display = 'block';
        }

        function saveSessionData() {
            const formData = new FormData(document.getElementById('questionarioForm'));
            const sessionData = {
                currentSection: currentSection,
                startTime: startTime,
                formData: {}
            };
            
            for (let [key, value] of formData.entries()) {
                sessionData.formData[key] = value;
            }
            
            // Salvar dados de radio buttons
            const radioButtons = document.querySelectorAll('input[type="radio"]:checked');
            radioButtons.forEach(radio => {
                sessionData.formData[radio.name] = radio.value;
            });
            
            localStorage.setItem('questionario_satisfacao_session', JSON.stringify(sessionData));
        }

        function loadSessionData() {
            const sessionData = localStorage.getItem('questionario_satisfacao_session');
            if (sessionData) {
                try {
                    const data = JSON.parse(sessionData);
                    
                    // Restaurar seção atual
                    if (data.currentSection && data.currentSection < sections.length) {
                        document.getElementById(sections[currentSection]).classList.remove('active');
                        currentSection = data.currentSection;
                        document.getElementById(sections[currentSection]).classList.add('active');
                        updateNavigationButtons();
                    }
                    
                    // Restaurar dados do formulário
                    Object.keys(data.formData).forEach(key => {
                        const field = document.querySelector(`[name="${key}"]`);
                        if (field) {
                            if (field.type === 'radio') {
                                const radio = document.querySelector(`input[name="${key}"][value="${data.formData[key]}"]`);
                                if (radio) {
                                    radio.checked = true;
                                    radio.dispatchEvent(new Event('change'));
                                }
                            } else if (field.type === 'checkbox') {
                                field.checked = data.formData[key] === 'on';
                                field.dispatchEvent(new Event('change'));
                            } else {
                                field.value = data.formData[key];
                            }
                        }
                    });
                    
                    // Restaurar informações da sessão
                    if (data.startTime) {
                        startTime = data.startTime;
                    }
                    
                } catch (error) {
                    console.error('Erro ao carregar dados da sessão:', error);
                }
            }
        }

        function clearSessionData() {
            localStorage.removeItem('questionario_satisfacao_session');
        }

        function saveAnalyticsData() {
            localStorage.setItem('questionario_analytics', JSON.stringify(analyticsData));
        }

        function clearAnalyticsData() {
            localStorage.removeItem('questionario_analytics');
            localStorage.removeItem('questionario_interactions');
        }

        function saveForRetry(data) {
            // Salvar dados para reenvio posterior em caso de falha
            let retryQueue = JSON.parse(localStorage.getItem('questionario_retry_queue') || '[]');
            retryQueue.push({
                data: data,
                timestamp: Date.now(),
                attempts: 0
            });
            localStorage.setItem('questionario_retry_queue', JSON.stringify(retryQueue));
        }

        function hasUnsavedData() {
            const form = document.getElementById('questionarioForm');
            const inputs = form.querySelectorAll('input, textarea, select');
            
            for (let input of inputs) {
                if (input.type === 'radio' && input.checked) {
                    return true;
                } else if (input.type === 'checkbox' && input.checked) {
                    return true;
                } else if ((input.type === 'text' || input.tagName === 'TEXTAREA' || input.tagName === 'SELECT') && input.value.trim() !== '') {
                    return true;
                }
            }
            return false;
        }

        // Inicializar botões de navegação
        updateNavigationButtons();
    </script>
</body>
</html>

